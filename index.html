<!DOCTYPE html>
<html lang='en'>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-control" content="public">
    <title>AI Confidence</title>
    <link rel="shortcut icon" href="#" />

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"
        integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>

    <link rel="stylesheet" href='https://fonts.googleapis.com/css?family=Roboto&display=swap'>
    <link rel="stylesheet" href="style.css?r=4">
</head>

<body style='text-align: center; margin-top: 30px; margin-bottom: 20px;'>
    <h2 style="margin-left: auto; margin-right: auto;">Do You Think My Transcription Is Correct?</h2>

    <div style="text-align: left; width: 800px; margin-left: auto; margin-right: auto; margin-top: 30px">

        <div id="instructions_and_decorations">
            <div style="margin-top: 30px;  text-align: justify;">
                <ul>
                    <li style="margin: 10px 0;"> Uncertainty highlighting is on if "Predicted Text" is highlighted.</li>
                    <!-- <li style="margin: 10px 0;">If your decision is correct, you gain a reward of $0.10. You will see your total reward at the end of the experiment. Your payment is $2.0 plus whatever you accumulate during this experiment.</li>
                    <li style="margin: 10px 0;">To help you make your decision, you will see the AI's answer, along with an explanation, and some information about how reliable the explanation is. After getting each piece of additional information, you will be asked whether you think the AI is correct or not.</li> -->
                </ul>

            </div>

            <br>
            <div style="text-align: right; height: 20px; margin-left: -30px; margin-bottom: 15px; margin-top: 40px;">
                <div id="progress" style="width: 150px; float: left;">(-/-)</div>
                <div id="timer" style="width: 100px; float: right; display: none; font-size: 1.3em;">20</div>
            </div>            
        </div>

        
        <div class="main_box" id="main_box_end" style="display: none">
            Thank you for participation in our study.
            <div id="reward_box" style="display: none">
                Your total reward is $0.00 (0 questions answered).
            </div>
            Please navigate <a href="https://app.prolific.com/submissions/complete?cc=C18F0V8M"
                style="color: black; font-weight: bold;">to Prolific</a> or with the code <b>C18F0V8M</b>.
        </div>

        <div class="main_box" id="main_box_end_mock" style="display: none">
            Thank you for testing out our study.
            <div id="reward_box_mock" style="display: none">
                Your total reward is $0.00 (0 questions answered).
            </div>
            Please complete the <a href="" target="_blank" style="color: black; font-weight: bold;">exit questionnaire</a> for providing feedback on the user study.
        </div>

        <div class="main_box" id="main_box_instructions" style="display: none">
            <input id="button_instructions_prev" type="button" value="Previous">
            <input id="button_instructions_next" type="button" value="Next" style="margin-bottom: 10px">

            <div id="instructions_0">Welcome to our user study. In this experiment, you will be reviewing and correcting latex equations generated by an AI from handwritten math images. Your task is to carefully evaluate the AI’s transcription and fix any errors if they exist. The survey consists of three parts:
            </div>
            <div id="instructions_1">
                <ul>
                    <li>You will first be shown the handwritten math image and the AI’s predicted transcription. Some transcriptions will include uncertainty highlighting, where parts of the text highlighted in red show where the model is less confident. If the AI is 100% sure of a section, it will appear without red highlighting.</li>
                    <br>
                    <li>You can tell if uncertainty highlighting is present by looking at the "Predicted Text." If it is highlighted, then uncertainty highlighting is present.</li>
                </ul>
                <br>
                <div style="display: flex; justify-content: center; align-items: flex-start;">
                    <div style="text-align: center; margin: 0 10px;">
                      <b>Example: Uncertainty Highlighting</b><br>
                      <img src="img/highlighting.png" style="height: 140px;">
                    </div>
                    <div style="text-align: center; margin: 0 10px;">
                      <b>Example: No Uncertainty Highlighting</b><br>
                      <img src="img/no_highlighting.png" style="height: 140px;">
                    </div>
                  </div>            
                </div>
            <div id="instructions_2">
                On the same page as the image and predicted text, there will be a text input box that is prefilled with the AI’s answer along with a visible countdown timer set to 20 seconds. Your task is to review the transcription and make any necessary corrections using the input box, before the timer runs out. 
                <br><br>
                <img src="img/question.png" style="display: block; margin-left: auto; margin-right: auto; height: 400px;">
            </div>
            <div id="instructions_3">
                Confidence Rating: Next, you will be asked to rate your confidence that the transcription is correct by selecting a number from 1 (not confident) to 5 (very confident). A choice is required to move on.
                <br><br>
                <img src="img/rating.png" style="display: block; margin-left: auto; margin-right: auto; height: 220px;">
            </div>
            <div id="instructions_4">
                Finally, you will be asked three feedback questions. Each question is shown with a text box, and each answer must be at least 25 characters long before you can proceed.
            </div>
            <div id="instructions_5">
                 <!-- For this annotation experiment we are looking
                at trivia and math questions. Note that the system performance may differ across question types. -->
                The experiment will have you check/fix 10 questions in total.
                <br><br>
                <span class='color_incorrect'><b>You are not permitted to leave this tab</b></span> for the duration of the experiment. This will be monitored and violation of this can result in your submission being rejected.
                <br><br>
                The average time of the experiment is 10 minutes.
                <br><br>
                You will not be paid if you already participated in this study before.
                <br><br>
                Click <b>Start study</b> if you understood all the instructions and want to start with the first
                question.
                Feel free to re-read the instructions again (<b>Previous</b>).

                <!-- <img src="img/instructions_5_trivia.png" style="width: 80%">
                <img src="img/instructions_5_math.png"> -->
            </div>
        </div>

        <div class="main_box" id="main_box_experiment" style="display: none">
                    <!-- Part 1: Question Screen -->
            <div id="part1" style="margin-top: 40px;">
                <!-- Existing content for question display -->
                <div id="question_display">
                <img id="question_image" src="" alt="Question Image" style="height: 110px; display: block; margin: 0 auto; max-width: 800px;">
                <div id="predicted_text_container" style="margin-top: 20px; font-size: 18px; text-align: center;">
                    <strong style="margin-right: 5px;">Predicted Text:</strong>   <span id="predicted_text"></span>
                </div>
                <div id="token_input_container" style="margin-top: 20px; text-align: center;">
                    <input type="text" id="token_input" style="width: 90%; font-size: 16px; padding: 8px;">
                </div>
                </div>
                <!-- Next button for Part 1: always visible -->
                <div style="text-align: center; margin-top: 20px;">
                <input id="button_next_part1" type="button" class="button-neutral" value="Next">
                </div>
            </div>
            
            <!-- Part 2: Confidence Rating Screen (initially hidden) -->
            <div id="part2" style="display: none; text-align: center; margin-top: 70px;">
                <p>Please rate your confidence in your answer from 1 (not confident) to 5 (very confident):</p>
                <div id="confidence_options">
                <button type="button" class="confidence-button" data-rating="1">1</button>
                <button type="button" class="confidence-button" data-rating="2">2</button>
                <button type="button" class="confidence-button" data-rating="3">3</button>
                <button type="button" class="confidence-button" data-rating="4">4</button>
                <button type="button" class="confidence-button" data-rating="5">5</button>
                </div>
                <div style="margin-top: 20px;">
                <input id="button_next_part2" type="button" class="button-neutral" value="Next" disabled>
                </div>
            </div>
        </div>
        <!-- Qualitative Feedback Section (initially hidden) -->
        <div class="main_box" id="qualitative_section" style="display: none;">
            <h3>Qualitative Feedback</h3>
            
            <div class="qual-question">
            <p>1. What did you think about the AI transcription quality?</p>
            <textarea id="qual_q1" rows="3" style="width: 100%;"></textarea>
            <p class="qual-warning" id="warn_q1" style="color:red; display:none;">Please enter at least 25 characters.</p>
            </div>
            
            <div class="qual-question">
            <p>2. How would you improve the explanations provided by the AI?</p>
            <textarea id="qual_q2" rows="3" style="width: 100%;"></textarea>
            <p class="qual-warning" id="warn_q2" style="color:red; display:none;">Please enter at least 25 characters.</p>
            </div>
            
            <div class="qual-question">
            <p>3. Any additional comments?</p>
            <textarea id="qual_q3" rows="3" style="width: 100%;"></textarea>
            <p class="qual-warning" id="warn_q3" style="color:red; display:none;">Please enter at least 25 characters.</p>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
            <input id="qual_next" type="button" class="button-neutral" value="Next">
            </div>
        </div>
  
        <br>
        <!-- Research project by Tejas Srinivasan and Matthew Salaway at the University of Southern California. -->

    </div>
    <script id="nocachescript"></script>
    <script>
        var randomNum = String((Math.floor(Math.random() * 10e10)));
        document.getElementById('nocachescript').src = "web.js?t=" + randomNum;
    </script>
</body>

</html>